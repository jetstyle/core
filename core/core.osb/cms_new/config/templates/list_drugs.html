{{TPL:List_Item}}
<li id="{{*id}}">
	<div class="element-">
		<img src="{{images}}element.gif" width="16" height="12" align="bottom" alt="" title="" />&nbsp;
		<a href="{{_href}}">{{_title}}</a>
		{{_controls}}
	</div>
</li>
{{/TPL:List_Item}}

{{TPL:List_Item_sel}}
<li id="{{*id}}">
	<div class="element-s-"><img src="{{images}}element_s.gif" width="16" height="12" align="bottom" alt="" title="" />&nbsp;{{_title}} 
	{{_controls}}
	</div>
</li>
{{/TPL:List_Item_sel}}

{{TPL:List_Empty}}<li id="{{*id}}"><div class="cms-nodata-">нет данных</div></li>{{/TPL:List_Empty}}




<!-- дальше не адаптировано для драгсов -->




{{TPL:List_Item_del}}
<div class="element-del-"><img src="{{images}}element_trash.gif" width="16" height="12" align="bottom" alt="" title="Удалённый элемент" />&nbsp;<a href="{{$_href}}">{{$_title}}</a>
  {{_controls}}</div>
{{/TPL:List_Item_del}}

{{TPL:List_Item_sel_del}}
<div class="element-s-"><img src="{{images}}element_s.gif" width="16" height="12" align="bottom" alt="" title="" />&nbsp;{{$_title}} 
{{_controls}}</div>
{{/TPL:List_Item_sel_del}}

{{TPL:List_Item_hidden}}<div class="element-hiden-"><img src="{{images}}element_hiden.gif" width="16" height="12" align="bottom" alt="" title="Скрытый элемент" />&nbsp;<a href="{{$_href}}">{{$_title}}</a>
  {{_controls}}</div>
{{/TPL:List_Item_hidden}}

{{TPL:List_Item_sel_hidden}}<div class="element-s-"><img src="{{images}}element_s.gif" width="16" height="12" align="bottom" alt="" title="" 
/>&nbsp;{{$_title}} 
{{_controls}}</div>
{{/TPL:List_Item_sel_hidden}}

{{TPL:List_Separator}}{{/TPL:List_Separator}}

{{TPL:List_Arrows}}{{__links_all}}{{/TPL:List_Arrows}}

{{TPL:add_new}}
  <div class="new-element-"><img src="{{images}}add_element.gif" width="16" height="12" align="bottom" alt="" title="" />
  <a href="{{*href}}">создать новый элемент</a>
  </div>
{{/TPL:add_new}}

{{TPL:Group_Select}}
<form name="{{*name}}" action="" method="get">
<select name="content_id" onChange="document.{{*name}}.submit()">
{{*options}}
</select>
</form>
{{/TPL:Group_Select}}
{{TPL:Group_Select_Option}}
<option value="{{*value}}"{{?*selected}} selected="true"{{/?}}>{{*title}}</option>
{{/TPL:Group_Select_Option}}

{{TPL:TrashShow}}<div class="trash-"><a href="{{$_href}}">показать удалённые</a></div>{{/TPL:TrashShow}}
{{TPL:TrashHide}}<div class="trash-"><a href="{{$_href}}">спрятать удалённые</a></div>{{/TPL:TrashHide}}

{{TPL:content}}
{{&css:dragable_items}}
{{&css:dragable_lists}}

{{&js:dk}}
{{&js:coordinates}}
{{&js:drag}}
{{&js:dragdrop}}


<script language="JavaScript" type="text/javascript">
<!--#
       function onDrop() 
       {
          var data = DragDrop.serData('g2'); 
          getSort();
       }

		window.onload = function() 
		{
			var list = document.getElementById("left_col");
			DragDrop.makeListContainer( list, 'g1' );
			list.onDragOver = function() { this.style["background"] = "#EEE"; };
			list.onDragOut = function() {this.style["background"] = "none"; };

			list.onDragDrop = function() {onDrop(); };
		};

        function getSort()
        {
          order = document.getElementById("order");
          order.value = DragDrop.serData('g1', null);
          //url, table, order_values
          send('{{/}}update_order', "port_types", order.value);
        }

		function send(url, table, values)
		{
			var req = new Subsys_JsHttpRequest_Js(); 
		    // Код, АВТОМАТИЧЕСКИ вызываемый при окончании загрузки. 
		    // alert(typeof(values));
		    req.onreadystatechange = function() 
		    {
		        if (req.readyState == 4) 
		        { 
		           if (req.responseText!="error" && req.responseText.length>0) 
		           { 
		           	   return true;
		           	   //сохраниение прошло успешно
		           }
		           else
		           {
		           	   alert('Не удалось установить соедение с сервером');
		           	   //сохранение обломалось
		           }
		        } 
		    } 
		    // Разрешаем кэширование (чтобы при одинаковых запросах 
		    // не обращаться к серверу несколько раз). 
		    req.caching = false; 
		    // Подготваливаем объект. 
		    req.open('GET', url, true);
		    // Посылаем данные запроса (задаются в виде хэша).
		    
		    /**
		     *ничего страшного, там проверяется принципал
		     *@params	tag			- таг для записи
		     *@filename id			- id строки для удалиния
		     */
		    var q = { 'order': values, 'table': table };
		    req.send( q );
		}
        function showValue()
        {
          order = document.getElementById("order");
          alert(order.value);
        }
	//-->
</script>

<div class="cms-list-advanced">
{{*title}}

{{*group_select}}

{{__arrows}}
<img class="block" src="{{images}}z.gif" width="1" height="10" align="top" alt="" />
{{*form}}
{{__logs}}
{{__picker}}
{{__filter}}
{{__trash_switch}}
{{*add_new}}
<img class="block" src="{{images}}z.gif" width="1" height="10" align="top" alt="" />

<input type="hidden" name="order" id="order" value="" />

<ul id="left_col" class="sortable boxy">
{{*items}}
</ul>

{{__bottom}}
<img class="block" src="{{images}}z.gif" width="1" height="10" align="top" alt="" />
{{__arrows}}
</div>
{{/TPL:content}}

{{TPL:delete}}<input type="submit" class="cms-delete-small-but hand" name="{{$prefix}}delete" value="удалить" onclick="return confirm('Действительно удалить?\nКорзины-то пока нет...');" />{{/TPL:delete}}
{{TPL:Form}}
<div class="cms-add-form">
<form action='{{$/}}' method='post' name='{{__form_name}}'>
<input type="hidden" name="{{$prefix}}update" value="1" />
{{$POST_STATE}}
<input type='text' name='{{prefix}}title' value='{{_title}}' style="width:148px;" /><br />
<input type="submit" class="cms-save-small-but hand" value="{{_save_string}}" />&nbsp;
{{__delete}}
</form>
</div>
<img class="block" src="{{images}}z.gif" width="1" height="10" align="top" alt="" />
{{/TPL:Form}}
